# mdb-query-scale
Run some basic queries while the collection grows, in order to test the scalability of MongoDB queries

Example:
```

[mlab data]# npm install @faker-js/faker

[mlab data]# mongosh -f orders.js

Creating customers...
Inserted 10000 customers.
Creating products...
Inserted 10000 products.
Creating stores...
Inserted 10000 stores.
Creating indexes...
Indexes created.
Inserting batch 1 of orders...
Creating orders...
Inserted 50000 orders.
Finished batch 1. Running some queries...
Running Query 1: Find last order by customer email
Running Query 2: Find last delivered orders for some products
Running Query 3: Estimated count of orders
=== Queries response time  === Total documents:        50000, Query 1:      4 ms, Query 2:      4 ms, Query 3:      1 ms
Inserting batch 2 of orders...
Creating orders...
Inserted 50000 orders.
Finished batch 2. Running some queries...
Running Query 1: Find last order by customer email
Running Query 2: Find last delivered orders for some products
Running Query 3: Estimated count of orders
=== Queries response time  === Total documents:       100000, Query 1:      4 ms, Query 2:      5 ms, Query 3:      2 ms
Inserting batch 3 of orders...
Creating orders...
Inserted 50000 orders.
Finished batch 3. Running some queries...
Running Query 1: Find last order by customer email
Running Query 2: Find last delivered orders for some products
Running Query 3: Estimated count of orders
=== Queries response time  === Total documents:       150000, Query 1:      4 ms, Query 2:      3 ms, Query 3:      3 ms
Inserting batch 4 of orders...
Creating orders...
Inserted 50000 orders.
Finished batch 4. Running some queries...
Running Query 1: Find last order by customer email
Running Query 2: Find last delivered orders for some products
Running Query 3: Estimated count of orders
=== Queries response time  === Total documents:       200000, Query 1:      3 ms, Query 2:      3 ms, Query 3:      1 ms
Inserting batch 5 of orders...
Creating orders...
Inserted 50000 orders.
Finished batch 5. Running some queries...
Running queries...
Running Query 1: Find last order by customer email
Running Query 2: Find last delivered orders for some products
Running Query 3: Estimated count of orders
=== Queries response time  === Total documents:       250000, Query 1:      3 ms, Query 2:      3 ms, Query 3:      1 ms
Inserting batch 6 of orders...
Creating orders...
Inserted 50000 orders.
Finished batch 6. Running some queries...
Running Query 1: Find last order by customer email
Running Query 2: Find last delivered orders for some products
Running Query 3: Estimated count of orders
=== Queries response time  === Total documents:       300000, Query 1:      7 ms, Query 2:      7 ms, Query 3:      2 ms
Inserting batch 7 of orders...
Creating orders...
Inserted 50000 orders.
Finished batch 7. Running some queries...
Running Query 1: Find last order by customer email
Running Query 2: Find last delivered orders for some products
Running Query 3: Estimated count of orders
=== Queries response time  === Total documents:       350000, Query 1:      3 ms, Query 2:      3 ms, Query 3:      1 ms
Inserting batch 8 of orders...
Creating orders...
Inserted 50000 orders.
Finished batch 8. Running some queries...
Running Query 1: Find last order by customer email
Running Query 2: Find last delivered orders for some products
Running Query 3: Estimated count of orders
=== Queries response time  === Total documents:       400000, Query 1:      5 ms, Query 2:      3 ms, Query 3:      2 ms
Inserting batch 9 of orders...
Creating orders...
Inserted 50000 orders.
Finished batch 9. Running some queries...
Running Query 1: Find last order by customer email
Running Query 2: Find last delivered orders for some products
Running Query 3: Estimated count of orders
=== Queries response time  === Total documents:       450000, Query 1:      3 ms, Query 2:      3 ms, Query 3:      1 ms
Inserting batch 10 of orders...
Creating orders...
Inserted 50000 orders.
Finished batch 10. Running some queries...
Running Query 1: Find last order by customer email
Running Query 2: Find last delivered orders for some products
Running Query 3: Estimated count of orders
=== Queries response time  === Total documents:       500000, Query 1:      5 ms, Query 2:      6 ms, Query 3:     12 ms
All tasks completed successfully!
```

As the collection size increases, the response time of the queries remains consistent. This validates that the indexes are correctly addressing the query access patterns.
